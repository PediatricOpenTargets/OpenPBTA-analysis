# Controls when the action will run. 
on:
  # Triggers the workflow on push or pull request events but only for the master branch
  pull_request:
    branches: [ dev ]
    paths: [ download-data.sh ]
    types: [ closed ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  push_download-data.sh:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-18.04
    steps:
    # Checks out your repository on the ubuntu-latest machine
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Pushes download-data.sh file
        uses: dmnemec/copy_file_to_another_repo_action@main
        env:
         API_TOKEN_GITHUB: ${{ secrets.GH_TOKEN }}
        with:
         source_file: 'download-data.sh'
         destination_repo: 'PediatricOpenTargets/data-ingestion'
         # By default will be to push directly to main
         # since the download-data.sh file will be reviewed in OpenPedCan-analysis repo already
         destination_branch: 'main'
         # uncomment to create a new branch with the download-data.sh added, 
         # destination_branch_create: 'new-release'
         user_email: "<>" 
         user_name: 'Github Bot'
         commit_message: 'Add latest release of download script'  
